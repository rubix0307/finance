<div x-data>
    <div class="main_block chart nav">
        <a :class="{ 'active': $store.chart_nav.selectedRange === 'week' }"
           @click="$store.chart_nav.setRange('week')">
            Неделя
        </a>
        <a :class="{ 'active': $store.chart_nav.selectedRange === 'month' }"
           @click="$store.chart_nav.setRange('month')">
            Месяц
        </a>
        <a :class="{ 'active': $store.chart_nav.selectedRange === 'year' }"
           @click="$store.chart_nav.setRange('year')">
            Год
        </a>
    </div>

    <div class="main_block chart nav">
        <a x-show="$store.chart_nav.availableGroups.includes('daily')"
           :class="{ 'active': $store.chart_nav.selectedGroup === 'daily' }"
           @click="$store.chart_nav.setGroup('daily')">
            по дням
        </a>
        <a x-show="$store.chart_nav.availableGroups.includes('weekly')"
           :class="{ 'active': $store.chart_nav.selectedGroup === 'weekly' }"
           @click="$store.chart_nav.setGroup('weekly')">
            по неделям
        </a>
        <a x-show="$store.chart_nav.availableGroups.includes('monthly')"
           :class="{ 'active': $store.chart_nav.selectedGroup === 'monthly' }"
           @click="$store.chart_nav.setGroup('monthly')">
            по месяцам
        </a>
    </div>
</div>

<div class="main_block chart">
    <button id="toggleMode">Переключить режим графика</button>
    <div id=“chartContainer” class="canvas">
        <canvas id="mainChart" height="340"></canvas>
    </div>
</div>
<script>
    window.addEventListener("DOMContentLoaded", () => {
        const canvas = document.getElementById("mainChart");
        Alpine.store('charts').initPieChartFromCanvas(canvas);
    });
</script>

<div class="main_block chart">
    <div id="chartLegend"></div>
</div>